import{_ as B}from"./BPJYlsRV.js";import{B as z,C as A,E as v,s as f,c as m,a as o,b as l,w as u,l as n,o as d,d as c,A as L,z as h,G as k,k as s}from"./CnQAi616.js";import{u as N}from"./CALTOV7h.js";const U={class:"min-h-screen flex items-center justify-center bg-gray-50 p-4"},j={class:"max-w-md w-full"},F={class:"space-y-6"},G={class:"text-center"},Z={class:"mt-2 text-sm text-gray-600"},q={key:0,class:"text-red-500"},M={key:1,class:"text-red-500"},O={class:"flex items-center justify-between mb-1"},R={key:0,class:"text-red-500"},W={key:1,class:"text-red-500"},Y={class:"flex items-center justify-between"},D={class:"text-center text-sm"},Q={__name:"login",setup($){console.log("Login page script loaded");const _=N(),x=z(),w=A();console.log("User value at script start:",x.value),x.value&&(console.log("Redirecting to home because user is logged in"),v("/"));const t=f({email:"",password:"",remember:!1}),r=f(!1),p=f(!1),b=a=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(a),V=async()=>{if(console.log("Form submitted",t.value),r.value=!0,!t.value.email||!t.value.password||!b(t.value.email)||t.value.password.length<6){console.log("Form validation failed");return}p.value=!0;try{const{error:a}=await _.auth.signInWithPassword({email:t.value.email,password:t.value.password});if(a)throw a;console.log("Login successful, redirecting to home"),v("/")}catch(a){console.log("Login error:",a),w.add({severity:"error",summary:"Error",detail:a.message,life:3e3})}finally{p.value=!1}},C=async()=>{try{const{error:a}=await _.auth.signInWithOAuth({provider:"google"});if(a)throw a}catch(a){w.add({severity:"error",summary:"Error",detail:a.message,life:3e3})}};return(a,e)=>{const g=B,P=n("InputText"),S=n("Password"),E=n("Checkbox"),y=n("Button"),I=n("Card"),T=n("Toast");return d(),m("div",U,[o("div",j,[l(I,null,{content:u(()=>[o("div",F,[o("div",G,[e[5]||(e[5]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Sign in to your account",-1)),o("p",Z,[e[4]||(e[4]=c(" Or ")),l(g,{to:"/auth/register",class:"text-primary-600 hover:text-primary-500"},{default:u(()=>e[3]||(e[3]=[c(" create a new account ")])),_:1,__:[3]})])]),o("form",{onSubmit:L(V,["prevent"]),class:"space-y-4"},[o("div",null,[e[6]||(e[6]=o("label",{for:"email",class:"block text-sm text-gray-600 mb-1"},"Email",-1)),l(P,{id:"email",modelValue:s(t).email,"onUpdate:modelValue":e[0]||(e[0]=i=>s(t).email=i),type:"email",placeholder:"Your Email",class:k([{"p-invalid":s(r)&&!s(t).email},"w-full"])},null,8,["modelValue","class"]),s(r)&&!s(t).email?(d(),m("small",q,"Email is required")):s(r)&&!b(s(t).email)?(d(),m("small",M,"Please enter a valid email")):h("",!0)]),o("div",null,[o("div",O,[e[8]||(e[8]=o("label",{for:"password",class:"block text-sm text-gray-600"},"Password",-1)),l(g,{to:"/auth/forgot-password",class:"text-sm text-primary-600 hover:text-primary-700"},{default:u(()=>e[7]||(e[7]=[c(" Forgot password? ")])),_:1,__:[7]})]),l(S,{id:"password",modelValue:s(t).password,"onUpdate:modelValue":e[1]||(e[1]=i=>s(t).password=i),placeholder:"Your Password",feedback:!1,toggleMask:"",class:k([{"p-invalid":s(r)&&!s(t).password},"w-full"])},null,8,["modelValue","class"]),s(r)&&!s(t).password?(d(),m("small",R,"Password is required")):s(r)&&s(t).password.length<6?(d(),m("small",W,"Password must be at least 6 characters")):h("",!0)]),o("div",Y,[l(E,{modelValue:s(t).remember,"onUpdate:modelValue":e[2]||(e[2]=i=>s(t).remember=i),binary:!0,inputId:"remember-me"},null,8,["modelValue"]),e[9]||(e[9]=o("label",{for:"remember-me",class:"ml-2 text-sm text-gray-600"},"Remember me",-1))]),l(y,{type:"submit",label:"Sign In",class:"w-full p-button-primary",loading:s(p)},null,8,["loading"]),l(y,{label:"Sign in with Google",icon:"pi pi-google",class:"w-full p-button-outlined p-button-secondary mt-2",onClick:C,type:"button"}),o("div",D,[l(g,{to:"/auth/register",class:"text-primary-600 hover:text-primary-500"},{default:u(()=>e[10]||(e[10]=[c(" Don't have an account? Sign up ")])),_:1,__:[10]})])],32)])]),_:1}),l(T,{position:"top-center"})])])}}};export{Q as default};
