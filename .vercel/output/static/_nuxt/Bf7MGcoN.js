import{_ as T}from"./BPJYlsRV.js";import{C as A,D as B,j as N,c as d,a as t,b as o,w as p,l as r,o as m,F as R,r as S,k as E,t as i,d as h}from"./CnQAi616.js";import{u as M}from"./CALTOV7h.js";import{u as V}from"./Cm5jJHcx.js";import{f as j}from"./sbWH3_uq.js";const q={class:"max-w-7xl mx-auto"},F={class:"flex items-center justify-between mb-8"},L={class:"overflow-x-auto"},$={class:"min-w-full divide-y divide-gray-200"},P={class:"bg-white divide-y divide-gray-200"},z={class:"px-6 py-4 whitespace-nowrap"},G={class:"text-sm font-medium text-gray-900"},H={class:"px-6 py-4 whitespace-nowrap"},I={class:"text-sm text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"text-sm text-gray-900"},O={class:"px-6 py-4 whitespace-nowrap"},Q={class:"star-rating"},U={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"text-sm text-gray-500"},Y={class:"px-6 py-4 whitespace-nowrap text-sm"},Z=["onClick"],nt={__name:"index",async setup(tt){let n,u;const x=M(),_=A(),g=B(),{data:c}=([n,u]=N(async()=>V("admin-reviews",async()=>{const{data:a}=await x.from("reviews").select(`
      *,
      author:profiles(*),
      category:categories(*)
    `).order("created_at",{ascending:!1});return a})),n=await n,u(),n),w=a=>j(new Date(a),"MMM d, yyyy"),v=a=>{g.require({message:"Are you sure you want to delete this review?",header:"Confirm Deletion",icon:"pi pi-exclamation-triangle",accept:async()=>{try{const{error:e}=await x.from("reviews").delete().eq("id",a);if(e)throw e;c.value=c.value.filter(l=>l.id!==a),_.add({severity:"success",summary:"Success",detail:"Review deleted successfully",life:3e3})}catch(e){_.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}}})};return(a,e)=>{const l=r("Button"),y=T,C=r("Tag"),k=r("Card"),b=r("Toast"),D=r("ConfirmDialog");return m(),d("div",q,[t("div",F,[e[0]||(e[0]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Reviews",-1)),o(y,{to:"/admin/reviews/new"},{default:p(()=>[o(l,{label:"Create New Review",icon:"pi pi-plus"})]),_:1})]),o(k,null,{content:p(()=>[t("div",L,[t("table",$,[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Author "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rating "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",P,[(m(!0),d(R,null,S(E(c),s=>{var f;return m(),d("tr",{key:s.id},[t("td",z,[t("div",G,i(s.title),1)]),t("td",H,[t("div",I,i(s.author.full_name),1)]),t("td",J,[t("div",K,i((f=s.category)==null?void 0:f.name),1)]),t("td",O,[t("div",Q,[e[1]||(e[1]=t("i",{class:"pi pi-star-fill mr-1"},null,-1)),h(" "+i(s.rating),1)])]),t("td",U,[o(C,{value:s.is_published?"Published":"Draft",severity:s.is_published?"success":"warning"},null,8,["value","severity"])]),t("td",W,[t("div",X,i(w(s.created_at)),1)]),t("td",Y,[o(y,{to:`/admin/reviews/${s.id}`,class:"text-primary-600 hover:text-primary-900 mr-4"},{default:p(()=>e[2]||(e[2]=[h(" Edit ")])),_:2,__:[2]},1032,["to"]),t("button",{onClick:et=>v(s.id),class:"text-red-600 hover:text-red-900"}," Delete ",8,Z)])])}),128))])])])]),_:1}),o(b),o(D)])}}};export{nt as default};
