import{u as l}from"./CALTOV7h.js";import{x as m,E as s,c as u,b as n,w as _,l as i,o as d,a as c}from"./CnQAi616.js";const p={class:"max-w-md mx-auto"},f={class:"text-center space-y-4"},x={__name:"confirm",setup(g){const a=l();return m(async()=>{try{const{data:{user:e},error:r}=await a.auth.getUser();if(r)throw r;if(e){const{data:o}=await a.from("profiles").select("*").eq("id",e.id).single();if(!o){const{error:t}=await a.from("profiles").insert({id:e.id,full_name:e.user_metadata.full_name,email:e.email,avatar_url:e.user_metadata.avatar_url});if(t)throw t}s("/")}}catch(e){console.error("Error during OAuth confirmation:",e),s("/auth/login")}}),(e,r)=>{const o=i("ProgressSpinner"),t=i("Card");return d(),u("div",p,[n(t,null,{content:_(()=>[c("div",f,[n(o),r[0]||(r[0]=c("p",{class:"text-gray-600"},"Completing sign in...",-1))])]),_:1})])}}};export{x as default};
