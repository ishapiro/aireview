import{_ as T}from"./BPJYlsRV.js";import{B as A,C as B,E as k,s as y,c as n,a,b as l,w as c,l as p,o as m,d as u,A as Y,z as w,G as v,k as t}from"./CnQAi616.js";import{u as z}from"./CALTOV7h.js";const I={class:"min-h-screen flex items-center justify-center bg-gray-50 p-4"},L={class:"max-w-md w-full"},q={class:"space-y-6"},O={class:"text-center"},F={class:"mt-2 text-sm text-gray-600"},G={key:0,class:"text-red-500"},M={key:0,class:"text-red-500"},W={key:0,class:"text-red-500"},Z={key:1,class:"text-red-500"},j={key:0,class:"text-red-500"},$={key:1,class:"text-red-500"},D={key:0,class:"text-red-500"},H={class:"flex items-start space-x-2"},J={for:"terms",class:"text-sm text-gray-600"},K={class:"text-center text-sm"},se={__name:"register",setup(Q){const b=z(),P=A(),g=B();P.value&&k("/");const e=y({firstName:"",lastName:"",email:"",phone:"",website:"",password:"",confirmPassword:"",terms:!1}),r=y(!1),x=y(!1),V=i=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(i),h=async()=>{if(r.value=!0,!(!e.value.firstName||!e.value.lastName||!e.value.email||!e.value.password||!e.value.confirmPassword||!e.value.terms||!V(e.value.email)||e.value.password.length<6||e.value.password!==e.value.confirmPassword)){x.value=!0;try{const{error:i,data:s}=await b.auth.signUp({email:e.value.email,password:e.value.password,options:{data:{first_name:e.value.firstName,last_name:e.value.lastName,phone:e.value.phone,website:e.value.website}}});if(i)throw i;const{error:d}=await b.from("profiles").insert({id:s.user.id,first_name:e.value.firstName,last_name:e.value.lastName,email:e.value.email,phone:e.value.phone,website:e.value.website});if(d)throw d;k("/auth/verify-email")}catch(i){g.add({severity:"error",summary:"Error",detail:i.message,life:3e3})}finally{x.value=!1}}},C=async()=>{try{const{error:i}=await b.auth.signInWithOAuth({provider:"google"});if(i)throw i}catch(i){g.add({severity:"error",summary:"Error",detail:i.message,life:3e3})}};return(i,s)=>{const d=T,f=p("InputText"),_=p("Password"),U=p("Checkbox"),N=p("Button"),E=p("Card"),S=p("Toast");return m(),n("div",I,[a("div",L,[l(E,null,{content:c(()=>[a("div",q,[a("div",O,[s[10]||(s[10]=a("h1",{class:"text-2xl font-bold text-gray-900"},"Create your account",-1)),a("p",F,[s[9]||(s[9]=u(" Or ")),l(d,{to:"/auth/login",class:"text-primary-600 hover:text-primary-500"},{default:c(()=>s[8]||(s[8]=[u(" sign in to your account ")])),_:1,__:[8]})])]),a("form",{onSubmit:Y(h,["prevent"]),class:"space-y-4"},[a("div",null,[s[11]||(s[11]=a("label",{for:"first-name",class:"block text-sm text-gray-600 mb-1"},"First Name",-1)),l(f,{id:"first-name",modelValue:t(e).firstName,"onUpdate:modelValue":s[0]||(s[0]=o=>t(e).firstName=o),placeholder:"Your First Name",class:v([{"p-invalid":t(r)&&!t(e).firstName},"w-full"])},null,8,["modelValue","class"]),t(r)&&!t(e).firstName?(m(),n("small",G,"First name is required")):w("",!0)]),a("div",null,[s[12]||(s[12]=a("label",{for:"last-name",class:"block text-sm text-gray-600 mb-1"},"Last Name",-1)),l(f,{id:"last-name",modelValue:t(e).lastName,"onUpdate:modelValue":s[1]||(s[1]=o=>t(e).lastName=o),placeholder:"Your Last Name",class:v([{"p-invalid":t(r)&&!t(e).lastName},"w-full"])},null,8,["modelValue","class"]),t(r)&&!t(e).lastName?(m(),n("small",M,"Last name is required")):w("",!0)]),a("div",null,[s[13]||(s[13]=a("label",{for:"email",class:"block text-sm text-gray-600 mb-1"},"Email",-1)),l(f,{id:"email",modelValue:t(e).email,"onUpdate:modelValue":s[2]||(s[2]=o=>t(e).email=o),type:"email",placeholder:"Your Email",class:v([{"p-invalid":t(r)&&!t(e).email},"w-full"])},null,8,["modelValue","class"]),t(r)&&!t(e).email?(m(),n("small",W,"Email is required")):t(r)&&!V(t(e).email)?(m(),n("small",Z,"Please enter a valid email")):w("",!0)]),a("div",null,[s[14]||(s[14]=a("label",{for:"phone",class:"block text-sm text-gray-600 mb-1"},"Phone (Optional)",-1)),l(f,{id:"phone",modelValue:t(e).phone,"onUpdate:modelValue":s[3]||(s[3]=o=>t(e).phone=o),placeholder:"Your Phone Number",class:"w-full"},null,8,["modelValue"])]),a("div",null,[s[15]||(s[15]=a("label",{for:"website",class:"block text-sm text-gray-600 mb-1"},"Website (Optional)",-1)),l(f,{id:"website",modelValue:t(e).website,"onUpdate:modelValue":s[4]||(s[4]=o=>t(e).website=o),placeholder:"Your Website",class:"w-full"},null,8,["modelValue"])]),a("div",null,[s[16]||(s[16]=a("label",{for:"password",class:"block text-sm text-gray-600 mb-1"},"Password",-1)),l(_,{id:"password",modelValue:t(e).password,"onUpdate:modelValue":s[5]||(s[5]=o=>t(e).password=o),placeholder:"Your Password",feedback:!0,toggleMask:"",class:v([{"p-invalid":t(r)&&!t(e).password},"w-full"]),inputProps:{autocomplete:"new-password"}},null,8,["modelValue","class"]),t(r)&&!t(e).password?(m(),n("small",j,"Password is required")):t(r)&&t(e).password.length<6?(m(),n("small",$,"Password must be at least 6 characters")):w("",!0)]),a("div",null,[s[17]||(s[17]=a("label",{for:"confirm-password",class:"block text-sm text-gray-600 mb-1"},"Confirm Password",-1)),l(_,{id:"confirm-password",modelValue:t(e).confirmPassword,"onUpdate:modelValue":s[6]||(s[6]=o=>t(e).confirmPassword=o),placeholder:"Confirm Password",feedback:!1,toggleMask:"",class:v([{"p-invalid":t(r)&&!t(e).confirmPassword},"w-full"]),inputProps:{autocomplete:"new-password"}},null,8,["modelValue","class"]),t(r)&&!t(e).confirmPassword?(m(),n("small",D,"Please confirm your password")):w("",!0)]),a("div",H,[l(U,{modelValue:t(e).terms,"onUpdate:modelValue":s[7]||(s[7]=o=>t(e).terms=o),binary:!0,inputId:"terms"},null,8,["modelValue"]),a("label",J,[s[20]||(s[20]=u(" I agree to the ")),l(d,{to:"/terms",class:"text-primary hover:text-primary-600"},{default:c(()=>s[18]||(s[18]=[u("Terms of Service")])),_:1,__:[18]}),s[21]||(s[21]=u(" and ")),l(d,{to:"/privacy",class:"text-primary hover:text-primary-600"},{default:c(()=>s[19]||(s[19]=[u("Privacy Policy")])),_:1,__:[19]})])]),l(N,{type:"submit",label:"Create Account",class:"w-full bg-primary hover:bg-primary-600 text-white",loading:t(x)},null,8,["loading"]),l(N,{label:"Sign up with Google",icon:"pi pi-google",class:"w-full p-button-outlined p-button-secondary mt-2",onClick:C,type:"button"}),a("div",K,[l(d,{to:"/auth/login",class:"text-primary-600 hover:text-primary-500"},{default:c(()=>s[22]||(s[22]=[u(" Already have an account? Sign in ")])),_:1,__:[22]})])],32)])]),_:1}),l(S,{position:"top-center"})])])}}};export{se as default};
